<!DOCTYPE html>
<html>
<head>
    <title>MarketMind Regime Monitor</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #111;
            color: white;
            text-align: center;
            margin-top: 80px;
        }

        .card {
            display: inline-block;
            padding: 40px;
            border-radius: 12px;
            min-width: 400px;
        }

        .normal {
            background-color: #1e3a8a;
        }

        .stressed {
            background-color: #92400e;
        }

        .systemic {
            background-color: #7f1d1d;
        }

        .standby {
            background-color: #4b5563;
        }

        .regime {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .flags {
            font-size: 18px;
            opacity: 0.85;
        }
    </style>
</head>
<body>

<div id="container" class="card normal">
    <div id="regime" class="regime">Loading...</div>
    <div class="flags">
        Flatten Triggered: <span id="flatten">false</span><br>
        Block New Entries: <span id="block">false</span>
    </div>
</div>

<script>
    async function fetchRegime() {
        try {
            const response = await fetch("/regime");
            const data = await response.json();

            const container = document.getElementById("container");
            const regimeText = document.getElementById("regime");
            const flatten = document.getElementById("flatten");
            const block = document.getElementById("block");

            regimeText.innerText = data.regime.toUpperCase();
            flatten.innerText = data.flatten_triggered;
            block.innerText = data.block_new_entries;

            container.className = "card " + data.regime;

        } catch (err) {
            console.error("Fetch error:", err);
        }
    }

    fetchRegime();
    setInterval(fetchRegime, 2000);
</script>

</body>
</html>